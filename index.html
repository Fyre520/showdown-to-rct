<!DOCTYPE html>
<html data-theme="light">
<head>
    <title>Showdown to RCT Converter</title>
    <!-- Previous styles remain... -->
    <style>
        /* Add new styles for feedback */
        .feedback-container {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }

        .feedback-success {
            background-color: var(--success-bg, #d4edda);
            color: var(--success-text, #155724);
            border: 1px solid var(--success-border, #c3e6cb);
        }

        .feedback-error {
            background-color: var(--error-bg, #f8d7da);
            color: var(--error-text, #721c24);
            border: 1px solid var(--error-border, #f5c6cb);
        }

        .pokemon-count {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin: 5px 0;
        }

        .error-list {
            margin: 0;
            padding-left: 20px;
            font-size: 0.9em;
        }

        /* Add dark mode variables */
        :root[data-theme="dark"] {
            --success-bg: #1e4620;
            --success-text: #d4edda;
            --success-border: #2a5a2a;
            --error-bg: #442020;
            --error-text: #f8d7da;
            --error-border: #5a2a2a;
            --text-secondary: #888888;
        }
    </style>
</head>
<body>
    <!-- Previous HTML remains the same until the script section -->
    <script>
        function convertFormat() {
            const input = document.getElementById('input').value;
            const result = ShowdownConverter.convert(input);
            
            // Create feedback elements
            const feedbackContainer = document.createElement('div');
            feedbackContainer.className = `feedback-container feedback-${result.success ? 'success' : 'error'}`;
            
            // Add Pokémon count
            const countDiv = document.createElement('div');
            countDiv.className = 'pokemon-count';
            countDiv.textContent = `Detected ${result.totalPokemon} Pokémon${result.totalPokemon !== 1 ? 's' : ''}`;
            feedbackContainer.appendChild(countDiv);

            if (result.success) {
                feedbackContainer.insertBefore(
                    document.createTextNode('Conversion successful!'),
                    countDiv
                );
                document.getElementById('output').textContent = result.result;
            } else {
                const errorHeader = document.createElement('div');
                errorHeader.textContent = 'Please fix the following issues:';
                feedbackContainer.insertBefore(errorHeader, countDiv);

                const errorList = document.createElement('ul');
                errorList.className = 'error-list';
                result.errors.forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = error;
                    errorList.appendChild(li);
                });
                feedbackContainer.appendChild(errorList);
                
                document.getElementById('output').textContent = '';
            }

            // Replace any existing feedback
            const existingFeedback = document.querySelector('.feedback-container');
            if (existingFeedback) {
                existingFeedback.remove();
            }
            document.getElementById('input').parentNode.insertBefore(
                feedbackContainer,
                document.getElementById('output').parentNode
            );
        }
    </script>
</body>
</html>
